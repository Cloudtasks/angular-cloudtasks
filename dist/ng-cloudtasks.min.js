!function(factory){"use strict";"function"==typeof define&&define.amd?define(["angular"],factory):factory("object"==typeof exports?require("angular"):angular)}(function(angular){"use strict";var module=angular.module("cloudtasks",[]);return module.provider("$cloudtasks",[function(){var settings={clientId:!1,options:{},photoSizesWidths:[1280,920,800,720,500,400,250,100],photoSizesHeights:[720,520,450,405,281,225,150,56]},provider={$get:function(){return settings},settings:settings};return provider}]),module.directive("ctSrc",["$cloudtasks","$location","$timeout",function($cloudtasks,$location,$timeout){return{restrict:"A",scope:{},link:function(scope,element,attrs){return $cloudtasks.clientId?void $timeout(function(){var width=element.width(),height=element.height();-1===attrs.ctSrc.indexOf("http")&&(attrs.ctSrc=$location.protocol()+":"+attrs.ctSrc);var optionsString="/",options=$cloudtasks.options;attrs.ctOptions&&(options=angular.extend(options,scope.$eval(attrs.ctOptions))),angular.forEach(options,function(value,key){value&&(optionsString="string"==typeof value?optionsString+key+":"+value+"/":optionsString+key+"/")});for(var x=0;x<$cloudtasks.photoSizesWidths.length;x++)if($cloudtasks.photoSizesWidths[x]<width){for(var y=0;y<$cloudtasks.photoSizesHeights.length;y++)if($cloudtasks.photoSizesHeights[y]<height){var calc=($cloudtasks.photoSizesWidths[x-1]?$cloudtasks.photoSizesWidths[x-1]:$cloudtasks.photoSizesWidths[x])+"x"+($cloudtasks.photoSizesHeights[y-1]?$cloudtasks.photoSizesHeights[y-1]:$cloudtasks.photoSizesHeights[y]);(attrs.ctDefault||$cloudtasks.defaultImage)&&(element.css("background-image","url(//images.cloudtasks.io/"+$cloudtasks.clientId+optionsString+calc+"/"+encodeURIComponent(decodeURIComponent(attrs.ctDefault||$cloudtasks.defaultImage))+")"),element.bind("error",function(){element.unbind("error"),element.attr("src","//images.cloudtasks.io/"+$cloudtasks.clientId+optionsString+calc+"/"+encodeURIComponent(decodeURIComponent(attrs.ctDefault||$cloudtasks.defaultImage)))})),element.attr("src","//images.cloudtasks.io/"+$cloudtasks.clientId+optionsString+calc+"/"+encodeURIComponent(decodeURIComponent(attrs.ctSrc))),y=$cloudtasks.photoSizesHeights.length+1}x=$cloudtasks.photoSizesWidths.length+1}},0):void console.log("You need to configure your clientId")}}}]),module});